
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>VSCode 源码解读：事件系统设计 | Here. There.</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="被删">
    
    <meta name="description" content="最近在研究前端大型项目中要怎么管理满天飞的事件、模块间各种显示和隐式调用的问题，本文结合相应的源码分析，记录 VS Code 中的事件管理系统设计。">
    
    
    
    
    <link rel="alternate" href="/atom.xml" title="Here. There." type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    
<link rel="stylesheet" href="/css/style.css">

    
<script type="text/javascript">
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3d902de4a19cf2bf179534ffd2dd7b7f";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<meta name="generator" content="Hexo 6.3.0"></head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/sun.png" alt="Here. There." title="Here. There."/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Here. There.">Here. There.</a></h1>
				<h2 class="blog-motto">Love ice cream. Love sunshine. Love life. Love the world. Love myself. Love you.</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					
						<li><a href="/">首页</a></li>
					
						<li><a target="_blank" rel="noopener" href="https://github.com/godbasin/godbasin.github.io">所有文章</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/categories">分类</a></li>
					
						<li><a href="https://godbasin.github.io/front-end-playground">前端游乐场</a></li>
					
						<li><a href="/about">关于我</a></li>
					
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2020/07/05/vscode-event/" title="VSCode 源码解读：事件系统设计" itemprop="url">VSCode 源码解读：事件系统设计</a>
  </h1>
  <p class="article-author">By
    
      <a href="https://godbasin.github.io" title="被删">被删</a>
    </p>
  <p class="article-time">
    <time datetime="2020-07-05T01:55:29.000Z" itemprop="datePublished">2020-07-05</time>
    更新日期:<time datetime="2020-07-05T03:13:05.687Z" itemprop="dateModified">2020-07-05</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#VS-Code-%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.</span> <span class="toc-text">VS Code 事件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Q1-VS-Code-%E4%B8%AD%E7%9A%84%E4%BA%8B%E4%BB%B6%E7%AE%A1%E7%90%86%E4%BB%A3%E7%A0%81%E5%9C%A8%E5%93%AA%EF%BC%9F"><span class="toc-number">1.1.</span> <span class="toc-text">Q1: VS Code 中的事件管理代码在哪？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q2-VS-Code-%E4%B8%AD%E7%9A%84%E4%BA%8B%E4%BB%B6%E9%83%BD%E5%8C%85%E6%8B%AC%E4%BA%86%E5%93%AA%E4%BA%9B%E8%83%BD%E5%8A%9B%EF%BC%9F"><span class="toc-number">1.2.</span> <span class="toc-text">Q2: VS Code 中的事件都包括了哪些能力？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q3-VS-Code-%E4%B8%AD%E7%9A%84%E4%BA%8B%E4%BB%B6%E7%9A%84%E8%A7%A6%E5%8F%91%E5%92%8C%E7%9B%91%E5%90%AC%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84%EF%BC%9F"><span class="toc-number">1.3.</span> <span class="toc-text">Q3: VS Code 中的事件的触发和监听是怎么实现的？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q4-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E4%BA%8B%E4%BB%B6%E6%98%AF%E6%80%8E%E4%B9%88%E7%AE%A1%E7%90%86%E7%9A%84%EF%BC%9F"><span class="toc-number">1.4.</span> <span class="toc-text">Q4: 项目中的事件是怎么管理的？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q5-%E4%BA%8B%E4%BB%B6%E6%BB%A1%E5%A4%A9%E9%A3%9E%EF%BC%8C%E4%B8%8D%E4%BC%9A%E5%AF%BC%E8%87%B4%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98%E5%90%97%EF%BC%9F"><span class="toc-number">1.5.</span> <span class="toc-text">Q5: 事件满天飞，不会导致性能问题吗？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q6-%E4%B8%8A%E9%9D%A2%E5%8F%AA%E9%94%80%E6%AF%81%E4%BA%86%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91%E5%99%A8%E6%9C%AC%E8%BA%AB%E7%9A%84%E8%B5%84%E6%BA%90%EF%BC%8C%E9%82%A3%E5%AF%B9%E4%BA%8E%E8%AE%A2%E9%98%85%E8%80%85%E6%9D%A5%E8%AF%B4%EF%BC%8C%E8%A6%81%E6%80%8E%E4%B9%88%E9%94%80%E6%AF%81%E8%AE%A2%E9%98%85%E7%9A%84-Listener-%E5%91%A2%EF%BC%9F"><span class="toc-number">1.6.</span> <span class="toc-text">Q6: 上面只销毁了事件触发器本身的资源，那对于订阅者来说，要怎么销毁订阅的 Listener 呢？</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%93%E6%9D%9F%E8%AF%AD"><span class="toc-number">2.</span> <span class="toc-text">结束语</span></a></li></ol>
		</div>
		
		<p>最近在研究前端大型项目中要怎么管理满天飞的事件、模块间各种显示和隐式调用的问题，本文结合相应的源码分析，记录 VS Code 中的事件管理系统设计。</p>
<span id="more"></span>
<h1 id="VS-Code-事件"><a href="#VS-Code-事件" class="headerlink" title="VS Code 事件"></a>VS Code 事件</h1><p>看源码的方式有很多种，带着疑问有目的性地看，会简单很多。</p>
<h2 id="Q1-VS-Code-中的事件管理代码在哪？"><a href="#Q1-VS-Code-中的事件管理代码在哪？" class="headerlink" title="Q1: VS Code 中的事件管理代码在哪？"></a>Q1: VS Code 中的事件管理代码在哪？</h2><p>一般来说，说到事件，肯定是跟<code>event</code>关键字相关，因此我们直接全局搜一下文件名（VS Code 下快捷键<code>ctrl+p</code>）:<br><img src="https://github-imglib-1255459943.cos.ap-chengdu.myqcloud.com/vscode-event-file-name.png" alt=""></p>
<p>一下子就出来了，这个路径是<code>base\common\event.ts</code>的肯定是比较关键的。打开一看，里面比较关键的有两个：<strong>Event</strong>和<strong>Emitter</strong>。</p>
<h2 id="Q2-VS-Code-中的事件都包括了哪些能力？"><a href="#Q2-VS-Code-中的事件都包括了哪些能力？" class="headerlink" title="Q2: VS Code 中的事件都包括了哪些能力？"></a>Q2: VS Code 中的事件都包括了哪些能力？</h2><p>先来看看<code>Event</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 主要定义了一些接口协议，以及相关方法</span></span><br><span class="line"><span class="comment">// 使用 namespace 的方式将相关内容包裹起来</span></span><br><span class="line"><span class="keyword">export</span> namespace <span class="title class_">Event</span> &#123;</span><br><span class="line">  <span class="comment">// 来看看里面比较关键的一些方法</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 给定一个事件，返回另一个仅触发一次的事件</span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">function</span> once&lt;T&gt;(<span class="attr">event</span>: <span class="title class_">Event</span>&lt;T&gt;): <span class="title class_">Event</span>&lt;T&gt; &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 给定一连串的事件处理功能（过滤器，映射等），每个事件和每个侦听器都将调用每个函数</span></span><br><span class="line">  <span class="comment">// 对事件链进行快照可以使每个事件每个事件仅被调用一次</span></span><br><span class="line">  <span class="comment">// 以此衍生了 map、forEach、filter、any 等方法此处省略</span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">function</span> snapshot&lt;T&gt;(<span class="attr">event</span>: <span class="title class_">Event</span>&lt;T&gt;): <span class="title class_">Event</span>&lt;T&gt; &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 给事件增加防抖</span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">function</span> debounce&lt;T&gt;(<span class="attr">event</span>: <span class="title class_">Event</span>&lt;T&gt;, <span class="attr">merge</span>: <span class="function">(<span class="params">last: T | <span class="literal">undefined</span>, event: T</span>) =&gt;</span> T, delay?: number, leading?: boolean, leakWarningThreshold?: number): <span class="title class_">Event</span>&lt;T&gt;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 触发一次的事件，同时包括触发时间</span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">function</span> stopwatch&lt;T&gt;(<span class="attr">event</span>: <span class="title class_">Event</span>&lt;T&gt;): <span class="title class_">Event</span>&lt;number&gt; &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 仅在 event 元素更改时才触发的事件</span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">function</span> latch&lt;T&gt;(<span class="attr">event</span>: <span class="title class_">Event</span>&lt;T&gt;): <span class="title class_">Event</span>&lt;T&gt; &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 缓冲提供的事件，直到出现第一个 listener，这时立即触发所有事件，然后从头开始传输事件</span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">function</span> buffer&lt;T&gt;(<span class="attr">event</span>: <span class="title class_">Event</span>&lt;T&gt;, nextTick = <span class="literal">false</span>, <span class="attr">_buffer</span>: T[] = []): <span class="title class_">Event</span>&lt;T&gt; &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 可链式处理的事件，支持以下方法</span></span><br><span class="line">  <span class="keyword">export</span> interface <span class="title class_">IChainableEvent</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="attr">event</span>: <span class="title class_">Event</span>&lt;T&gt;;</span><br><span class="line">    map&lt;O&gt;(<span class="attr">fn</span>: <span class="function">(<span class="params">i: T</span>) =&gt;</span> O): <span class="title class_">IChainableEvent</span>&lt;O&gt;;</span><br><span class="line">    <span class="title function_">forEach</span>(<span class="attr">fn</span>: <span class="function">(<span class="params">i: T</span>) =&gt;</span> <span class="keyword">void</span>): <span class="title class_">IChainableEvent</span>&lt;T&gt;;</span><br><span class="line">    <span class="title function_">filter</span>(<span class="attr">fn</span>: <span class="function">(<span class="params">e: T</span>) =&gt;</span> boolean): <span class="title class_">IChainableEvent</span>&lt;T&gt;;</span><br><span class="line">    filter&lt;R&gt;(<span class="attr">fn</span>: <span class="function">(<span class="params">e: T | R</span>) =&gt;</span> e is R): <span class="title class_">IChainableEvent</span>&lt;R&gt;;</span><br><span class="line">    reduce&lt;R&gt;(<span class="attr">merge</span>: <span class="function">(<span class="params">last: R | <span class="literal">undefined</span>, event: T</span>) =&gt;</span> R, initial?: R): <span class="title class_">IChainableEvent</span>&lt;R&gt;;</span><br><span class="line">    <span class="title function_">latch</span>(): <span class="title class_">IChainableEvent</span>&lt;T&gt;;</span><br><span class="line">    <span class="title function_">debounce</span>(<span class="attr">merge</span>: <span class="function">(<span class="params">last: T | <span class="literal">undefined</span>, event: T</span>) =&gt;</span> T, delay?: number, leading?: boolean, leakWarningThreshold?: number): <span class="title class_">IChainableEvent</span>&lt;T&gt;;</span><br><span class="line">    debounce&lt;R&gt;(<span class="attr">merge</span>: <span class="function">(<span class="params">last: R | <span class="literal">undefined</span>, event: T</span>) =&gt;</span> R, delay?: number, leading?: boolean, leakWarningThreshold?: number): <span class="title class_">IChainableEvent</span>&lt;R&gt;;</span><br><span class="line">    <span class="title function_">on</span>(<span class="attr">listener</span>: <span class="function">(<span class="params">e: T</span>) =&gt;</span> any, thisArgs?: any, disposables?: <span class="title class_">IDisposable</span>[] | <span class="title class_">DisposableStore</span>): <span class="title class_">IDisposable</span>;</span><br><span class="line">    <span class="title function_">once</span>(<span class="attr">listener</span>: <span class="function">(<span class="params">e: T</span>) =&gt;</span> any, thisArgs?: any, disposables?: <span class="title class_">IDisposable</span>[]): <span class="title class_">IDisposable</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">ChainableEvent</span>&lt;T&gt; implements <span class="title class_">IChainableEvent</span>&lt;T&gt; &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 将事件转为可链式处理的事件</span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">function</span> chain&lt;T&gt;(<span class="attr">event</span>: <span class="title class_">Event</span>&lt;T&gt;): <span class="title class_">IChainableEvent</span>&lt;T&gt; &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 来自 DOM 事件的事件</span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">function</span> fromDOMEventEmitter&lt;T&gt;(<span class="attr">emitter</span>: <span class="title class_">DOMEventEmitter</span>, <span class="attr">eventName</span>: string, <span class="attr">map</span>: <span class="function">(<span class="params">...args: any[]</span>) =&gt;</span> T = <span class="function"><span class="params">id</span> =&gt;</span> id): <span class="title class_">Event</span>&lt;T&gt; &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 来自 Promise 的事件</span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">function</span> fromPromise&lt;T = any&gt;(<span class="attr">promise</span>: <span class="title class_">Promise</span>&lt;T&gt;): <span class="title class_">Event</span>&lt;<span class="literal">undefined</span>&gt; &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们能看到，<code>Event</code>中主要是一些对事件的处理和某种类型事件的生成。其中，除了常见的<code>once</code>和 DOM 事件等兼容，还提供了比较丰富的事件能力：</p>
<ul>
<li>防抖动</li>
<li>可链式调用</li>
<li>缓存</li>
<li>Promise 转事件</li>
</ul>
<h2 id="Q3-VS-Code-中的事件的触发和监听是怎么实现的？"><a href="#Q3-VS-Code-中的事件的触发和监听是怎么实现的？" class="headerlink" title="Q3: VS Code 中的事件的触发和监听是怎么实现的？"></a>Q3: VS Code 中的事件的触发和监听是怎么实现的？</h2><p>到这里，我们只看到了关于事件的一些功能（参考<code>Event</code>），而事件的触发和监听又是怎么进行的呢？</p>
<p>我们可以继续来看<code>Emitter</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这是事件发射器的一些生命周期和设置</span></span><br><span class="line"><span class="keyword">export</span> interface <span class="title class_">EmitterOptions</span> &#123;</span><br><span class="line">  onFirstListenerAdd?: <span class="title class_">Function</span>;</span><br><span class="line">  onFirstListenerDidAdd?: <span class="title class_">Function</span>;</span><br><span class="line">  onListenerDidAdd?: <span class="title class_">Function</span>;</span><br><span class="line">  onLastListenerRemove?: <span class="title class_">Function</span>;</span><br><span class="line">  leakWarningThreshold?: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Emitter</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="comment">// 可传入生命周期方法和设置</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options?: EmitterOptions</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 允许大家订阅此发射器的事件</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">event</span>(): <span class="title class_">Event</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="comment">// 此处会根据传入的生命周期相关设置，在对应的场景下调用相关的生命周期方法</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 向订阅者触发事件</span></span><br><span class="line">  <span class="title function_">fire</span>(<span class="attr">event</span>: T): <span class="keyword">void</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 清理相关的 listener 和队列等</span></span><br><span class="line">  <span class="title function_">dispose</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看到，<code>Emitter</code>以<code>Event</code>为对象，以简洁的方式提供了事件的订阅、触发、清理等能力。</p>
<h2 id="Q4-项目中的事件是怎么管理的？"><a href="#Q4-项目中的事件是怎么管理的？" class="headerlink" title="Q4: 项目中的事件是怎么管理的？"></a>Q4: 项目中的事件是怎么管理的？</h2><p><code>Emitter</code>似乎有些简单了，我们只能看到单个事件发射器的使用。那各个模块之间的事件订阅和触发又是怎么实现的呢？</p>
<p>我们来全局搜一下关键字<code>Emitter</code>:<br><img src="https://github-imglib-1255459943.cos.ap-chengdu.myqcloud.com/vscode-event-global-emitter.jpg" alt=""></p>
<p>搜出来很多地方都有使用，我们来看一下第一个：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里我们只摘录相关的代码</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">WindowManager</span> &#123;</span><br><span class="line">  public <span class="keyword">static</span> readonly <span class="variable constant_">INSTANCE</span> = <span class="keyword">new</span> <span class="title class_">WindowManager</span>();</span><br><span class="line">  <span class="comment">// 注册一个事件发射器</span></span><br><span class="line">  private readonly _onDidChangeZoomLevel = <span class="keyword">new</span> <span class="title class_">Emitter</span>&lt;number&gt;();</span><br><span class="line">  <span class="comment">// 将该发射器允许大家订阅的事件取出来</span></span><br><span class="line">  public readonly <span class="attr">onDidChangeZoomLevel</span>: <span class="title class_">Event</span>&lt;number&gt; = <span class="variable language_">this</span>.<span class="property">_onDidChangeZoomLevel</span>.<span class="property">event</span>;</span><br><span class="line"></span><br><span class="line">  public <span class="title function_">setZoomLevel</span>(<span class="attr">zoomLevel</span>: number, <span class="attr">isTrusted</span>: boolean): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">_zoomLevel</span> === zoomLevel) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_zoomLevel</span> = zoomLevel;</span><br><span class="line">    <span class="comment">// 当 zoomLevel 有变更时，触发该事件</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_onDidChangeZoomLevel</span>.<span class="title function_">fire</span>(<span class="variable language_">this</span>.<span class="property">_zoomLevel</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>显然，在 VS Code 里，事件的使用方式主要包括：</p>
<ul>
<li>注册事件发射器</li>
<li>对外提供定义的事件</li>
<li>在特定时机向订阅者触发事件</li>
</ul>
<p>那么，其他地方又是怎样订阅这么一个事件呢？在这个例子中，由于浏览器实例唯一，可以通过挂载全局对象的方式来提供使用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对外提供一个调用全局实例的方法</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">onDidChangeZoomLevel</span>(<span class="params">callback: (zoomLevel: number) =&gt; <span class="keyword">void</span></span>): <span class="title class_">IDisposable</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">WindowManager</span>.<span class="property">INSTANCE</span>.<span class="title function_">onDidChangeZoomLevel</span>(callback);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 其他地方的调用方式</span></span><br><span class="line"><span class="keyword">import</span> &#123; onDidChangeZoomLevel &#125; <span class="keyword">from</span> <span class="string">&#x27;vs/base/browser/browser&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> zoomListener = <span class="title function_">onDidChangeZoomLevel</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 该干啥干啥</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>除此之外，我们也可以通过创建实例调用来直接监听相关事件:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> instance = <span class="keyword">new</span> <span class="title class_">WindowManager</span>(opts);</span><br><span class="line">instance.<span class="title function_">onDidChangeZoomLevel</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 该干啥干啥</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="Q5-事件满天飞，不会导致性能问题吗？"><a href="#Q5-事件满天飞，不会导致性能问题吗？" class="headerlink" title="Q5: 事件满天飞，不会导致性能问题吗？"></a>Q5: 事件满天飞，不会导致性能问题吗？</h2><p>习惯使用一些前端框架的小伙伴们肯定比较有经验，我们如果在某个组件里做了事件订阅这样的操作，当组件销毁的时候是需要取消事件订阅的。否则该订阅内容会在内存中一直存在，除了一些异常问题，还可能引起内存泄露。</p>
<p>那么，VS Code 里又是怎么处理这样的问题呢？</p>
<p>其实我们在全局搜<code>Emitter</code>的时候，也能看到一些地方的使用方式是：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 只选取局部关键代码摘要</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Scrollable</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Disposable</span> &#123;</span><br><span class="line">  private _onScroll = <span class="variable language_">this</span>.<span class="title function_">_register</span>(<span class="keyword">new</span> <span class="title class_">Emitter</span>&lt;<span class="title class_">ScrollEvent</span>&gt;());</span><br><span class="line">  public readonly <span class="attr">onScroll</span>: <span class="title class_">Event</span>&lt;<span class="title class_">ScrollEvent</span>&gt; = <span class="variable language_">this</span>.<span class="property">_onScroll</span>.<span class="property">event</span>;</span><br><span class="line"></span><br><span class="line">  private <span class="title function_">_setState</span>(<span class="attr">newState</span>: <span class="title class_">ScrollState</span>): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> oldState = <span class="variable language_">this</span>.<span class="property">_state</span>;</span><br><span class="line">    <span class="keyword">if</span> (oldState.<span class="title function_">equals</span>(newState)) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_state</span> = newState;</span><br><span class="line">    <span class="comment">// 状态变更的时候，触发事件</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_onScroll</span>.<span class="title function_">fire</span>(<span class="variable language_">this</span>.<span class="property">_state</span>.<span class="title function_">createScrollEvent</span>(oldState));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里使用了<code>this._register(new Emitter&lt;T&gt;())</code>这样的方式注册事件发射器，我们能看到该方法继承自<code>Disposable</code>。而<code>Disposable</code>的实现也很简洁:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> abstract <span class="keyword">class</span> <span class="title class_">Disposable</span> implements <span class="title class_">IDisposable</span> &#123;</span><br><span class="line">  <span class="comment">// 用一个 Set 来存储注册的事件发射器</span></span><br><span class="line">  private readonly _store = <span class="keyword">new</span> <span class="title class_">DisposableStore</span>();</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">trackDisposable</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 处理事件发射器</span></span><br><span class="line">  public <span class="title function_">dispose</span>(): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="title function_">markTracked</span>(<span class="variable language_">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_store</span>.<span class="title function_">dispose</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 注册一个事件发射器</span></span><br><span class="line">  protected _register&lt;T <span class="keyword">extends</span> <span class="title class_">IDisposable</span>&gt;(<span class="attr">t</span>: T): T &#123;</span><br><span class="line">    <span class="keyword">if</span> ((t <span class="keyword">as</span> unknown <span class="keyword">as</span> <span class="title class_">Disposable</span>) === <span class="variable language_">this</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Cannot register a disposable on itself!&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_store</span>.<span class="title function_">add</span>(t);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也就是说，每个继承<code>Disposable</code>类都会有管理事件发射器的相关方法，包括添加、销毁处理等。其实我们仔细看看，这个<code>Disposable</code>并不只是服务于事件发射器，它适用于所有支持<code>dispose()</code>方法的对象：</p>
<blockquote>
<p>Dispose 模式主要用来资源管理，资源比如内存被对象占用，则会通过调用方法来释放。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> interface <span class="title class_">IDisposable</span> &#123;</span><br><span class="line">  <span class="title function_">dispose</span>(): <span class="keyword">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">DisposableStore</span> implements <span class="title class_">IDisposable</span> &#123;</span><br><span class="line">  private _toDispose = <span class="keyword">new</span> <span class="title class_">Set</span>&lt;<span class="title class_">IDisposable</span>&gt;();</span><br><span class="line">  private _isDisposed = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 处置所有注册的 Disposable，并将其标记为已处置</span></span><br><span class="line">  <span class="comment">// 将来添加到此对象的所有 Disposable 都将在 add 中处置。</span></span><br><span class="line">  public <span class="title function_">dispose</span>(): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">_isDisposed</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">markTracked</span>(<span class="variable language_">this</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_isDisposed</span> = <span class="literal">true</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">clear</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 丢弃所有已登记的 Disposable，但不要将其标记为已处置</span></span><br><span class="line">  public <span class="title function_">clear</span>(): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_toDispose</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="title function_">dispose</span>());</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_toDispose</span>.<span class="title function_">clear</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 添加一个 Disposable</span></span><br><span class="line">  public add&lt;T <span class="keyword">extends</span> <span class="title class_">IDisposable</span>&gt;(<span class="attr">t</span>: T): T &#123;</span><br><span class="line">    <span class="title function_">markTracked</span>(t);</span><br><span class="line">    <span class="comment">// 如果已处置，则不添加</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">_isDisposed</span>) &#123;</span><br><span class="line">      <span class="comment">// 报错提示之类的</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 未处置，则可添加</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">_toDispose</span>.<span class="title function_">add</span>(t);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因此，我们可以看到，在 VS Code 中是这样管理事件的：</p>
<ol>
<li>抹平 DOM 事件等差异，提供标准化的<code>Event</code>和<code>Emitter</code>能力。</li>
<li>通过注册<code>Emitter</code>，并对外提供类似生命周期的方法<code>onXxxxx</code>的方式，来进行事件的订阅和监听。</li>
<li>通过提供通用类<code>Disposable</code>，统一管理多个事件发射器（或其他资源）的注册、销毁。</li>
</ol>
<h2 id="Q6-上面只销毁了事件触发器本身的资源，那对于订阅者来说，要怎么销毁订阅的-Listener-呢？"><a href="#Q6-上面只销毁了事件触发器本身的资源，那对于订阅者来说，要怎么销毁订阅的-Listener-呢？" class="headerlink" title="Q6: 上面只销毁了事件触发器本身的资源，那对于订阅者来说，要怎么销毁订阅的 Listener 呢？"></a>Q6: 上面只销毁了事件触发器本身的资源，那对于订阅者来说，要怎么销毁订阅的 Listener 呢？</h2><p>或许读到这里的时候，你依然有点懵。看上去 VS Code 的<code>Emitter</code>和<code>Event</code>似乎跟常见的实现方式很相似，只是使用的方式有点不一样而已，到底有什么特别的呢？</p>
<p>不知道大家注意到了没，在 VS Code 中，注册一个事件发射器、订阅某个事件，都是通过<code>this._register()</code>这样的方式来实现:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 注册事件发射器</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Button</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Disposable</span> &#123;</span><br><span class="line">  <span class="comment">// 注册一个事件发射器，可使用 this._onDidClick.fire(xxx) 来触发事件</span></span><br><span class="line">  private _onDidClick = <span class="variable language_">this</span>.<span class="title function_">_register</span>(<span class="keyword">new</span> <span class="title class_">Emitter</span>&lt;<span class="title class_">Event</span>&gt;());</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">onDidClick</span>(): <span class="title class_">BaseEvent</span>&lt;<span class="title class_">Event</span>&gt; &#123; <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_onDidClick</span>.<span class="property">event</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 订阅某个事件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">QuickInputController</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Disposable</span> &#123;</span><br><span class="line">  <span class="comment">// 省略很多其他非关键代码</span></span><br><span class="line">  private <span class="title function_">getUI</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> ok = <span class="keyword">new</span> <span class="title class_">Button</span>(okContainer);</span><br><span class="line">    ok.<span class="property">label</span> = <span class="title function_">localize</span>(<span class="string">&#x27;ok&#x27;</span>, <span class="string">&quot;OK&quot;</span>);</span><br><span class="line">    <span class="comment">// 注册一个 Disposable，用来订阅某个事件</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">_register</span>(ok.<span class="title function_">onDidClick</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">onDidAcceptEmitter</span>.<span class="title function_">fire</span>();</span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也就是说当某个类被销毁时，会发生以下事情：</p>
<ol>
<li>它所注册的事件发射器会被销毁，而事件发射器中的 Listener、队列等都会被清空。</li>
<li>它所订阅的一些事件会被销毁，订阅中的 Listener 同样会被移除。</li>
</ol>
<p>至于订阅事件的 Listener 是如何被移除的，可参考以下代码:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Emitter</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">event</span>(): <span class="title class_">Event</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">_event</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">_event</span> = <span class="function">(<span class="params">listener: (e: T) =&gt; any, thisArgs?: any, disposables?: IDisposable[] | DisposableStore</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 若无队列，则新建一个</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">_listeners</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">_listeners</span> = <span class="keyword">new</span> <span class="title class_">LinkedList</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 往队列中添加该 Listener，同时返回一个移除该 Listener 的方法</span></span><br><span class="line">        <span class="keyword">const</span> remove = <span class="variable language_">this</span>.<span class="property">_listeners</span>.<span class="title function_">push</span>(!thisArgs ? listener : [listener, thisArgs]);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> <span class="attr">result</span>: <span class="title class_">IDisposable</span>;</span><br><span class="line">        <span class="comment">// 返回一个带 dispose 方法的结果，dispose 执行时会移除该 Listener</span></span><br><span class="line">        result = &#123;</span><br><span class="line">          <span class="attr">dispose</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            result.<span class="property">dispose</span> = <span class="title class_">Emitter</span>.<span class="property">_noop</span>;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">_disposed</span>) &#123;</span><br><span class="line">              <span class="title function_">remove</span>();</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">if</span> (disposables <span class="keyword">instanceof</span> <span class="title class_">DisposableStore</span>) &#123;</span><br><span class="line">          disposables.<span class="title function_">add</span>(result);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(disposables)) &#123;</span><br><span class="line">          disposables.<span class="title function_">push</span>(result);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_event</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>到这里，VS Code 中事件相关的管理的设计也都呈现出来了，包括：</p>
<ul>
<li>提供标准化的<code>Event</code>和<code>Emitter</code>能力</li>
<li>通过注册<code>Emitter</code>，并对外提供类似生命周期的方法<code>onXxxxx</code>的方式，来进行事件的订阅和监听</li>
<li>通过提供通用类<code>Disposable</code>，统一管理相关资源的注册和销毁</li>
<li>通过使用同样的方式<code>this._register()</code>注册事件和订阅事件，将事件相关资源的处理统一挂载到<code>dispose()</code>方法中</li>
</ul>
<h1 id="结束语"><a href="#结束语" class="headerlink" title="结束语"></a>结束语</h1><p>VS Code 中除了事件的管理，Dispose 模式还体现在各种其他资源的管理，包括插件等。</p>
<p>当我们遇到一些问题不知道该怎么解决的时候，可以试着站到巨人的肩膀上，说不定可以看到更多。</p>
  
	</div>
	<img src="https://github-imglib-1255459943.cos.ap-chengdu.myqcloud.com/2code2.jpg" width="200" height="200" style="display:block;margin: 0 auto;" />
	<p style="text-align: center;margin-top: 10px;margin-bottom: 10px;">码生艰难，写文不易，给我家猪囤点猫粮了喵~</p>
	<p style="text-align: center;"><a target="_blank" rel="noopener" href="https://space.bilibili.com/42233366">B站: 被删</a></p>
	<div class="article-content">
		<p style="margin-top:50px;">
			查看Github有更多内容噢：<a target="_blank" rel="noopener" href="https://github.com/godbasin">https://github.com/godbasin</a>
			<br>
			更欢迎来<a href="https://godbasin.github.io/front-end-playground">被删的前端游乐场</a>边撸猫边学前端噢
			<br>
			<br>
			如果你想要关注日常生活中的我，欢迎关注“牧羊的猪”公众号噢
		</p>
	</div>
	<div class="author-right">
  		<p>作者：被删</p>
  		<p>出处：<a href="https://godbasin.github.io">https://godbasin.github.io</a></p>
  		<p>本文版权归作者所有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接，否则保留追究法律责任的权利。</p>
	</div>
		<footer class="article-footer clearfix">

  <div class="article-tags">
  
  <span></span> <a href="/tags/逻辑实现/">逻辑实现</a>
  </div>


<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">前端解决方案</a>
</div>



<div class="article-share" id="share">

  
<!-- JiaThis Button BEGIN -->
<div class="jiathis_style_24x24">
	<a class="jiathis_button_qzone"></a>
	<a class="jiathis_button_tsina"></a>
	<a class="jiathis_button_tqq"></a>
	<a class="jiathis_button_weixin"></a>
	<a class="jiathis_button_renren"></a>
	<a href="http://www.jiathis.com/share?uid=2134021" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
</div>
<script type="text/javascript">
var jiathis_config = {data_track_clickback:'true'};
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code_mini/jia.js?uid=2134021" charset="utf-8"></script>
<!-- JiaThis Button END -->   


</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2020/07/26/interview-6-javascript/" title="前端面试这件事--6.Javascript相关">
  <strong>PREVIOUS:</strong><br/>
  <span>
  前端面试这件事--6.Javascript相关</span>
</a>
</div>


<div class="next">
<a href="/2020/07/04/reactive-programing/"  title="响应式编程在前端领域的应用">
 <strong>NEXT:</strong><br/> 
 <span>响应式编程在前端领域的应用
</span>
</a>
</div>

</nav>

	<!-- 如果不是首页且没使用 `comments: false` 关闭评论，则尝试加载评论 -->

    <!-- 配置中启用多说时，导入相应代码 -->
    


</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
  <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#VS-Code-%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.</span> <span class="toc-text">VS Code 事件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Q1-VS-Code-%E4%B8%AD%E7%9A%84%E4%BA%8B%E4%BB%B6%E7%AE%A1%E7%90%86%E4%BB%A3%E7%A0%81%E5%9C%A8%E5%93%AA%EF%BC%9F"><span class="toc-number">1.1.</span> <span class="toc-text">Q1: VS Code 中的事件管理代码在哪？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q2-VS-Code-%E4%B8%AD%E7%9A%84%E4%BA%8B%E4%BB%B6%E9%83%BD%E5%8C%85%E6%8B%AC%E4%BA%86%E5%93%AA%E4%BA%9B%E8%83%BD%E5%8A%9B%EF%BC%9F"><span class="toc-number">1.2.</span> <span class="toc-text">Q2: VS Code 中的事件都包括了哪些能力？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q3-VS-Code-%E4%B8%AD%E7%9A%84%E4%BA%8B%E4%BB%B6%E7%9A%84%E8%A7%A6%E5%8F%91%E5%92%8C%E7%9B%91%E5%90%AC%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84%EF%BC%9F"><span class="toc-number">1.3.</span> <span class="toc-text">Q3: VS Code 中的事件的触发和监听是怎么实现的？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q4-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E4%BA%8B%E4%BB%B6%E6%98%AF%E6%80%8E%E4%B9%88%E7%AE%A1%E7%90%86%E7%9A%84%EF%BC%9F"><span class="toc-number">1.4.</span> <span class="toc-text">Q4: 项目中的事件是怎么管理的？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q5-%E4%BA%8B%E4%BB%B6%E6%BB%A1%E5%A4%A9%E9%A3%9E%EF%BC%8C%E4%B8%8D%E4%BC%9A%E5%AF%BC%E8%87%B4%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98%E5%90%97%EF%BC%9F"><span class="toc-number">1.5.</span> <span class="toc-text">Q5: 事件满天飞，不会导致性能问题吗？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q6-%E4%B8%8A%E9%9D%A2%E5%8F%AA%E9%94%80%E6%AF%81%E4%BA%86%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91%E5%99%A8%E6%9C%AC%E8%BA%AB%E7%9A%84%E8%B5%84%E6%BA%90%EF%BC%8C%E9%82%A3%E5%AF%B9%E4%BA%8E%E8%AE%A2%E9%98%85%E8%80%85%E6%9D%A5%E8%AF%B4%EF%BC%8C%E8%A6%81%E6%80%8E%E4%B9%88%E9%94%80%E6%AF%81%E8%AE%A2%E9%98%85%E7%9A%84-Listener-%E5%91%A2%EF%BC%9F"><span class="toc-number">1.6.</span> <span class="toc-text">Q6: 上面只销毁了事件触发器本身的资源，那对于订阅者来说，要怎么销毁订阅的 Listener 呢？</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%93%E6%9D%9F%E8%AF%AD"><span class="toc-number">2.</span> <span class="toc-text">结束语</span></a></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  	
	<div class="archiveslist">
		<p class="asidetitle">最近文章</p>
			<ul class="archive-list">
			
					
				<li class="archive-list-item">
					<a class="archive-list-link" href="/2025/09/06/front-end-basic-js-eventloop/" title="前端基础补齐--有关 JavaScript 单线程">前端基础补齐--有关 JavaScr...</a>
				</li>
				
			
					
				<li class="archive-list-item">
					<a class="archive-list-link" href="/2025/08/09/front-end-basic-js-engine/" title="前端基础补齐--有关 JavaScript 代码执行">前端基础补齐--有关 JavaScr...</a>
				</li>
				
			
					
				<li class="archive-list-item">
					<a class="archive-list-link" href="/2025/07/06/front-end-basic-js-extend/" title="前端基础补齐--有关 JavaScript 继承">前端基础补齐--有关 JavaScr...</a>
				</li>
				
			
					
				<li class="archive-list-item">
					<a class="archive-list-link" href="/2025/06/15/render-engine-downgrate-render/" title="复杂渲染引擎架构与设计--10.降级渲染">复杂渲染引擎架构与设计--10.降级...</a>
				</li>
				
			
					
				<li class="archive-list-item">
					<a class="archive-list-link" href="/2025/05/09/render-engine-pre-calculate/" title="复杂渲染引擎架构与设计--9.预热计算">复杂渲染引擎架构与设计--9.预热计...</a>
				</li>
				
			
					
				<li class="archive-list-item">
					<a class="archive-list-link" href="/2025/04/10/front-end-performance-preload-order/" title="前端性能优化--预加载顺序设计">前端性能优化--预加载顺序设计...</a>
				</li>
				
			
					
				<li class="archive-list-item">
					<a class="archive-list-link" href="/2025/03/09/front-end-performance-fps-monitor/" title="前端性能优化--FPS页面流畅度">前端性能优化--FPS页面流畅度...</a>
				</li>
				
			
					
				<li class="archive-list-item">
					<a class="archive-list-link" href="/2025/02/09/front-end-performance-fast-properties/" title="前端性能优化--JavaScript 引擎性能">前端性能优化--JavaScript...</a>
				</li>
				
			
					
				<li class="archive-list-item">
					<a class="archive-list-link" href="/2025/01/02/front-end-performance-binary-attribute/" title="前端性能优化--二进制压缩数据内容">前端性能优化--二进制压缩数据内容...</a>
				</li>
				
			
					
				<li class="archive-list-item">
					<a class="archive-list-link" href="/2024/12/27/front-end-performance-code-detail/" title="前端性能优化--代码习惯">前端性能优化--代码习惯...</a>
				</li>
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
			</ul>
	</div>


  
  <div class="archiveslist">
    <p class="asidetitle"><a href="/archives">归档</a></p>
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/09/">九月 2025</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/08/">八月 2025</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/07/">七月 2025</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/06/">六月 2025</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/05/">五月 2025</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/04/">四月 2025</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">三月 2025</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/02/">二月 2025</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/01/">一月 2025</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">十二月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/11/">十一月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">十月 2024</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">九月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">八月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">七月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">六月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">五月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">四月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">三月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">二月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">一月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">十二月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">十一月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">十月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">九月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">八月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">七月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">六月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">五月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">四月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">三月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">一月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">十一月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">十月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">九月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">八月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">七月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">六月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">五月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">四月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">三月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">二月 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">一月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">十一月 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">41</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">9</span></li></ul>
  </div>


  
<div class="archiveslist">
	<p class="asidetitle"><a href="/categories">分类</a></p>
		<ul class="archive-list">
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/Angular源码/" title="Angular源码">Angular源码<sup>16</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/CSS炒饭/" title="CSS炒饭">CSS炒饭<sup>3</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/D3小馒头/" title="D3小馒头">D3小馒头<sup>8</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/angular2火锅/" title="angular2火锅">angular2火锅<sup>25</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/angular混搭/" title="angular混搭">angular混搭<sup>33</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/box2djs方糖/" title="box2djs方糖">box2djs方糖<sup>34</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/cyclejs哈根达斯/" title="cyclejs哈根达斯">cyclejs哈根达斯<sup>8</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/jQuery杂烩/" title="jQuery杂烩">jQuery杂烩<sup>3</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/js什锦/" title="js什锦">js什锦<sup>30</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/react沙拉/" title="react沙拉">react沙拉<sup>16</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/three-js奶茶/" title="three.js奶茶">three.js奶茶<sup>5</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/vue八宝粥/" title="vue八宝粥">vue八宝粥<sup>30</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/webpack宾治/" title="webpack宾治">webpack宾治<sup>9</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/web乱炖/" title="web乱炖">web乱炖<sup>2</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/前端技能提升/" title="前端技能提升">前端技能提升<sup>7</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/前端满汉全席/" title="前端满汉全席">前端满汉全席<sup>8</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/前端解决方案/" title="前端解决方案">前端解决方案<sup>48</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/喵/" title="喵">喵<sup>2</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/小程序双皮奶/" title="小程序双皮奶">小程序双皮奶<sup>33</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/工作这杯茶/" title="工作这杯茶">工作这杯茶<sup>27</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/应用巧克力盒/" title="应用巧克力盒">应用巧克力盒<sup>2</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/思想棉花糖/" title="思想棉花糖">思想棉花糖<sup>8</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/柴米油盐工具集/" title="柴米油盐工具集">柴米油盐工具集<sup>1</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/自动化甜筒/" title="自动化甜筒">自动化甜筒<sup>1</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/categories/非前端钙片/" title="非前端钙片">非前端钙片<sup>7</sup></a>
			</li>
		
		</ul>
</div>


  
<div class="archiveslist">
	<p class="asidetitle">标签</p>
		<ul class="archive-list">
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/tags/分享/" title="分享">分享<sup>53</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/tags/前端技能/" title="前端技能">前端技能<sup>7</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/tags/功能设计/" title="功能设计">功能设计<sup>16</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/tags/原创部件/" title="原创部件">原创部件<sup>1</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/tags/心态/" title="心态">心态<sup>22</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/tags/性能优化/" title="性能优化">性能优化<sup>34</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/tags/教程/" title="教程">教程<sup>80</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/tags/晒猫/" title="晒猫">晒猫<sup>2</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/tags/笔记/" title="笔记">笔记<sup>121</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/tags/算法/" title="算法">算法<sup>9</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/tags/自制插件/" title="自制插件">自制插件<sup>2</sup></a>
			</li>
		
			<li class="archive-list-item">
				<a class="archive-list-link" href="/tags/逻辑实现/" title="逻辑实现">逻辑实现<sup>19</sup></a>
			</li>
		
		</ul>
</div>


    <div class="archiveslist">
    <p class="asidetitle"><a href="/archives">about</a></p>
      <ul class="archive-list">
      	<li class="archive-list-item">
      		<a>wangbeishan@163.com</a>
      		<a target="_blank" rel="noopener" href="https://github.com/godbasin">github.com/godbasin</a>
      	</li>
      </ul>
  </div>

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<section class="info">
		<p> 即使梦想再小，却很伟大 ^_^ </p>
	</section>
	 
		<p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2025 
		
		<a href="https://godbasin.github.io" target="_blank" title="被删">被删</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>







  </body>
</html>
